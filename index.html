<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QI World</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: black;
            color: white;
            overflow: hidden;
        }
        .loading-screen {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: black;
        }
        .loading-text {
            font-size: 24px;
            animation: blink 1.5s infinite;
        }
        @keyframes blink {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }
        .dashboard {
            display: none;
            padding: 20px;
        }
        .nav-bar {
            position: fixed;
            bottom: 0;
            width: 100%;
            display: flex;
            justify-content: space-around;
            background-color: #333;
            padding: 10px 0;
        }
        .nav-bar button {
            background: none;
            border: none;
            color: white;
            font-size: 16px;
            cursor: pointer;
        }
        .mining-section, .friend-section, .earn-section, .me-section {
            display: none;
        }
        .active {
            display: block;
        }
        .collect-btn {
            margin-top: 10px;
            padding: 10px 20px;
            background-color: green;
            border: none;
            color: white;
            cursor: pointer;
        }
        .mining-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    margin-top: 20px;
    position: relative;
}

.bucket {
    width: 150px;
    height: 200px;
    border: 3px solid white;
    border-radius: 5px;
    overflow: hidden;
    position: relative;
    background-color: #333;
    margin-bottom: 20px;
}

.fill {
    width: 100%;
    height: 0%;
    background-color: green;
    position: absolute;
    bottom: 0;
    transition: height 0.1s linear;
}

.countdown {
    font-size: 24px;
    margin-bottom: 20px;
    color: white;
}

.mining-btn {
    padding: 10px 20px;
    background-color: #555;
    border: none;
    color: white;
    font-size: 16px;
    cursor: pointer;
    border-radius: 5px;
    margin-top: 10px;
}

.mining-btn:hover {
    background-color: #777;
}

.collect-btn {
    padding: 10px 20px;
    background-color: green;
    border: none;
    color: white;
    font-size: 16px;
    cursor: pointer;
    border-radius: 5px;
    margin-top: 10px;
}

.collect-btn:disabled {
    background-color: gray;
    cursor: not-allowed;
}
    </stylre>
    <style>
        body {
    margin: 0;
    padding: 0;
    font-family: 'Arial', sans-serif;
    background-color: #121212; /* Dark background */
    color: #fff; /* White text */
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    overflow: hidden;
}

.mining-section {
    background: linear-gradient(145deg, #1e1e1e, #292929);
    border-radius: 20px;
    padding: 40px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
    text-align: center;
    width: 90%;
    max-width: 400px;
}

.mining-section h3 {
    font-size: 24px;
    font-weight: bold;
    margin-bottom: 20px;
    color: #00ffcc;
    text-shadow: 0px 0px 10px rgba(0, 255, 204, 0.8);
}

.mining-container {
    position: relative;
    margin: 20px auto;
}

.bucket {
    width: 200px;
    height: 300px;
    background: #333;
    border: 3px solid #555;
    border-radius: 10px;
    overflow: hidden;
    position: relative;
    margin: 0 auto;
    box-shadow: inset 0 4px 8px rgba(0, 0, 0, 0.5);
}

.fill {
    width: 100%;
    height: 0%;
    background: linear-gradient(145deg, #00ffcc, #0099ff);
    position: absolute;
    bottom: 0;
    border-radius: 0 0 10px 10px;
    transition: height 0.1s linear;
    box-shadow: 0px -4px 10px rgba(0, 255, 204, 0.5);
}

.countdown {
    font-size: 28px;
    font-weight: bold;
    color: #00ffcc;
    margin-top: 20px;
    text-shadow: 0px 0px 10px rgba(0, 255, 204, 0.8);
}

.mining-btn, .collect-btn {
    padding: 15px 30px;
    margin-top: 20px;
    font-size: 18px;
    font-weight: bold;
    color: #fff;
    background: linear-gradient(145deg, #00ffcc, #0099ff);
    border: none;
    border-radius: 30px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0px 8px 15px rgba(0, 255, 204, 0.5);
}

.mining-btn:hover, .collect-btn:hover {
    background: linear-gradient(145deg, #0099ff, #00ffcc);
    transform: translateY(-3px);
    box-shadow: 0px 12px 20px rgba(0, 255, 204, 0.8);
}

.mining-btn:disabled, .collect-btn:disabled {
    background: #555;
    cursor: not-allowed;
    box-shadow: none;
}

@media screen and (max-width: 480px) {
    .mining-section {
        padding: 20px;
    }

    .bucket {
        width: 150px;
        height: 250px;
    }

    .countdown {
        font-size: 24px;
    }

    .mining-btn, .collect-btn {
        font-size: 16px;
        padding: 10px 20px;
    }
}
    </style>
</head>
<body>
    <div class="loading-screen">
        <span class="loading-text">Welcome to QI World...</span>
    </div>
    <div class="dashboard">
        <h1>Welcome, <span id="username"></span></h1>
        <h2>Balance: <span id="balance">0</span> QI Tokens</h2>
        <div class="mining-section active">
    <h3 style="text-align: center;">Mining</h3>
    <div class="mining-container">
        <div class="bucket">
            <div class="fill" id="fill"></div>
        </div>
        <div class="countdown" id="countdown">3:00:00</div>
    </div>
    <div class="mined-tokens" id="mined-tokens">Tokens Mined: 0.0000 QI</div>
    <button id="start-mining" class="mining-btn">Start Farming</button>
    <button id="collect-tokens" class="collect-btn" disabled>Collect</button>
</div>
           
        <div class="friend-section">
            <h3>Friend</h3>
            <p>Your referral link: <span id="referral-link"></span></p>
            <h4>Invited Users:</h4>
            <ul id="invited-users"></ul>
        </div>
        <div class="earn-section">
            <h3>Earn</h3>
            <p>Complete tasks to earn tokens!</p>
            <ul id="tasks"></ul>
        </div>
        <div class="me-section">
            <h3>Me</h3>
            <p>User Info:</p>
            <p>Username: <span id="me-username"></span></p>
            <p>Balance: <span id="me-balance"></span> QI Tokens</p>
        </div>
    </div>
    <div class="nav-bar">
        <button id="nav-home">Home</button>
        <button id="nav-friend">Friend</button>
        <button id="nav-earn">Earn</button>
        <button id="nav-me">Me</button>
    </div>
    <script src="script.js"></script>
    <!-- Firebase App (the core Firebase SDK) -->
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
    import { getAuth } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

    
    
    const firebaseConfig = {
  apiKey: "AIzaSyDRFKGbGfH_xy_V9-xvXl2Z14U56ReDiJQ",
  authDomain: "drive-120a7.firebaseapp.com",
  databaseURL: "https://drive-120a7-default-rtdb.firebaseio.com",
  projectId: "drive-120a7",
  storageBucket: "drive-120a7.appspot.com",
  messagingSenderId: "312467553952",
  appId: "1:312467553952:web:57dce366c758b9473713c5"
};

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    const telegramBotToken = "7739360079:AAEa9TTmHfdYWvXR7OxnrcF6hAsBiQ7itOw";
    const telegramUserId = "USER_TELEGRAM_ID"; // Replace with dynamic user ID
    const telegramApiUrl = `https://api.telegram.org/bot${telegramBotToken}/getChat?chat_id=${telegramUserId}`;

    fetch(telegramApiUrl)
        .then(response => response.json())
        .then(data => {
            const username = data.result.username;
            authenticateUser(username);
        })
        .catch(error => console.error("Error fetching Telegram username:", error));

    function authenticateUser(username) {
        const userRef = db.collection("users").doc(username);

        userRef.get().then(doc => {
            if (doc.exists) {
                const userData = doc.data();
                loadUserData(userData);
            } else {
                userRef.set({
                    username: username,
                    balance: 0,
                }).then(() => {
                    loadUserData({ username: username, balance: 0 });
                });
            }
        }).catch(error => console.error("Error fetching user data:", error));
    }

    function loadUserData(userData) {
        document.getElementById("username").textContent = userData.username;
        document.getElementById("balance").textContent = userData.balance.toFixed(4);
    }
</script>
</body>
</html>